import {Component} from '@angular/core';
import {EmailTemplateService} from './emailTemplate.service'
@Component({
  moduleId: module.id,
  selector: 'my-app',
  templateUrl: 'app.component.html'
})

export class AppComponent {
  errorMessage: any;
  createdCoupon: any = {};
  DiscountCouponId: any = 46214;
  TemplateID: any = '110';
  emailTemplateString: any = '<div class="tempPage" style="margin: 0px auto; width: 540px; font-family: Arial; font-size: 14px; color: rgb(51, 51, 51); border: 1px solid rgb(209, 209, 209);"><div class="design xhEditorControlForDesign" style="padding: 10px; color: rgb(110, 104, 110);"> <div class=""><font size="1">Write a short preview of your email.</font> </div> <div class="CustomControlHeader">  <div class="CustomControlLeftHeader">      <div class="sortBoxes" title="Move"></div>  </div> <div class="CustomControlRightHeader"><div class="xhEditoreEdtcheckDv" title="Edit"></div><div class="xhEditoreRemoveCtrlDv" title="Remove"></div></div><div class="clear"></div></div></div><div class="tempBody ui-sortable" style="background-color: #f4f4f4;min-height:200px;"><div class="xhEditorControlForDesign" style="background-color: rgb(92, 230, 163); padding: 5px; position: relative; opacity: 1; left: 0px; top: 0px;" cntrl="CustomButton"><div class="xhEditorImageCon xhEditorControl xhEditorOneCollumViewBd NotEditableTextArea"><div class="xhEditorOneCollumView customButtonDvCL" style="text-align: center;"><div style="    font-size: 16px;display: inline-block; padding: 15px;" class=""><a custombutton="customButton" style="background-color: rgb(245, 32, 49); font-weight: bold; letter-spacing: -0.5px; border-radius: 5px; line-height: 100%; text-align: center; text-decoration: none; color: rgb(225, 240, 12); font-family: Arial; font-size: 16px; padding: 10px 30px;" target="_self" href="http://www.appointy.com" class="xhEdtrCustomButton ">Make Your Purchase at 1</a></div></div></div><div class="CustomControlHeader">  <div class="CustomControlLeftHeader">      <div class="sortBoxes" title="Move"></div>  </div> <div class="CustomControlRightHeader"><div class="xhEditoreEdtcheckDv" title="Edit"></div><div class="xhEditoreRemoveCtrlDv" title="Remove"></div></div><div class="clear"></div></div></div><div class="xhEditorControlForDesign" style="background-color: rgb(212, 70, 212); padding: 5px; position: relative; opacity: 1; left: 0px; top: 0px;" cntrl="CustomButton"><div class="xhEditorImageCon xhEditorControl xhEditorOneCollumViewBd NotEditableTextArea"><div class="xhEditorOneCollumView customButtonDvCL" style="text-align: center;"><div style="    font-size: 16px;display: inline-block; padding: 15px;" class=""><a custombutton="customButton" style="background-color: rgb(115, 79, 115); font-weight: bold; letter-spacing: -0.5px; border-radius: 5px; line-height: 100%; text-align: center; text-decoration: none; color: rgb(47, 62, 222); font-family: Arial; font-size: 16px; padding: 10px 30px;" target="_self" href="mailto:asd?subject=jyhv&amp;body=nbhjbhufvhv%20hbjygk" class="xhEdtrCustomButton ">Make Your Purchase at 2</a></div></div></div><div class="CustomControlHeader">  <div class="CustomControlLeftHeader">      <div class="sortBoxes" title="Move"></div>  </div> <div class="CustomControlRightHeader"><div class="xhEditoreEdtcheckDv" title="Edit"></div><div class="xhEditoreRemoveCtrlDv" title="Remove"></div></div><div class="clear"></div></div></div><div class="xhEditorControlForDesign" style="background-color: rgb(237, 19, 91); padding: 5px; position: relative; opacity: 1; left: 0px; top: 0px;" cntrl="ImageNImage"><div class="xhEditorImageNImgCon xhEditorControl xhEditorTwoCollumViewBd  NotEditableTextArea"><div class="xhEditorTwoCollumView customImgBlock" style="text-align: right; font-size: 0px; float: left; width: 50%; min-height: 50px; overflow: hidden;"><img src="http://shantest.appointy.com/EmailMarketing/TemplateHeaderImages/Anniversary/Anni1.jpg" style="width: 100%;"></div><div class="xhEditorTwoCollumView customImgBlock" style="text-align: right; font-size: 0px; float: left; width: 50%; min-height: 50px; overflow: hidden;"><img src="http://shantest.appointy.com/EmailMarketing/TemplateHeaderImages/Anniversary/Anni3.jpg" style="width: 100%;"></div><div class="clear" style="clear:both"></div></div><div class="CustomControlHeader">  <div class="CustomControlLeftHeader">      <div class="sortBoxes" title="Move"></div>  </div> <div class="CustomControlRightHeader"><div class="xhEditoreEdtcheckDv" title="Edit"></div><div class="xhEditoreRemoveCtrlDv" title="Remove"></div></div><div class="clear"></div></div></div><div class="xhEditorControlForDesign" style="background-color: rgb(235, 82, 235); padding: 5px; position: relative; opacity: 1; left: 0px; top: 0px; color: rgb(89, 96, 181);" cntrl="TextNImage"><div class="xhEditorTextNImgCon xhEditorControl xhEditorTwoCollumViewBd"><div class="xhEditorTwoCollumView" style="float: left; width: 50%; min-height: 50px; overflow: hidden;"><div class="EditableTextArea" style="padding:0px 25px;">This is text in<a href="http://real.com" style="color: rgb(13, 222, 205);">http://real.com</a>put. Click to edit this text...</div></div><div class="xhEditorTwoCollumView customImgBlock" style="text-align: left; font-size: 0px; float: left; width: 50%; min-height: 50px; overflow: hidden;"><img src="https://vignette4.wikia.nocookie.net/fantendo/images/0/09/100px-Mega_MarioBros.jpg/revision/latest?cb=20110805202457" style="width: auto;"></div><div class="clear" style="clear:both"></div></div><div class="CustomControlHeader">  <div class="CustomControlLeftHeader">      <div class="sortBoxes" title="Move"></div>  </div> <div class="CustomControlRightHeader"><div class="xhEditoreEdtcheckDv" title="Edit"></div><div class="xhEditoreRemoveCtrlDv" title="Remove"></div></div><div class="clear"></div></div></div><div class="xhEditorControlForDesign" style="background-color: rgb(244, 244, 244); padding: 5px; position: relative; opacity: 1; left: 0px; top: 0px;" cntrl="ImageNImage"><div class="xhEditorImageNImgCon xhEditorControl xhEditorTwoCollumViewBd  NotEditableTextArea"><div class="xhEditorTwoCollumView customImgBlock" style="text-align: right; font-size: 0px; float: left; width: 50%; min-height: 50px; overflow: hidden;"><img src="http://shantest.appointy.com/EmailMarketing/TemplateHeaderImages/Anniversary/Anni1.jpg" style="width: 100%;"></div><div class="xhEditorTwoCollumView customImgBlock" style="text-align: right; font-size: 0px; float: left; width: 50%; min-height: 50px; overflow: hidden;"><img src="http://shantest.appointy.com/EmailMarketing/TemplateHeaderImages/Anniversary/Anni3.jpg" style="width: 100%;"></div><div class="clear" style="clear:both"></div></div><div class="CustomControlHeader">  <div class="CustomControlLeftHeader">      <div class="sortBoxes" title="Move"></div>  </div> <div class="CustomControlRightHeader"><div class="xhEditoreEdtcheckDv" title="Edit"></div><div class="xhEditoreRemoveCtrlDv" title="Remove"></div></div><div class="clear"></div></div></div><div class="xhEditorControlForDesign" style="background-color: rgb(204, 57, 204); padding: 10px; position: relative; opacity: 1; left: 0px; top: 0px;" cntrl="Image"><div class="xhEditorImageCon xhEditorControl xhEditorOneCollumViewBd NotEditableTextArea"><div class="xhEditorOneCollumView customImgBlock" style="text-align: center; font-size:0px;"><img src="https://vignette4.wikia.nocookie.net/fantendo/images/0/09/100px-Mega_MarioBros.jpg/revision/latest?cb=20110805202457https://vignette4.wikia.nocookie.net/fantendo/images/0/09/100px-Mega_MarioBros.jpg/revision/latest?cb=20110805202457" style="width: auto;"></div></div><div class="CustomControlHeader">  <div class="CustomControlLeftHeader">      <div class="sortBoxes" title="Move"></div>  </div> <div class="CustomControlRightHeader"><div class="xhEditoreEdtcheckDv" title="Edit"></div><div class="xhEditoreRemoveCtrlDv" title="Remove"></div></div><div class="clear"></div></div></div><div class="xhEditorControlForDesign" style="background-color: rgb(245, 19, 38); padding: 5px; position: relative; opacity: 1; left: 0px; top: 0px; color: rgb(219, 55, 219);" cntrl="ImageNText"><div class="xhEditorTextNImgCon xhEditorControl xhEditorTwoCollumViewBd"><div class="xhEditorTwoCollumView customImgBlock" style="text-align: center; font-size: 0px; float: left; width: 50%; min-height: 50px; overflow: hidden;"><img src="http://shantest.appointy.com/EmailMarketing/TemplateHeaderImages/Anniversary/Anni3.jpg" style="width: 100%;"></div><div class="xhEditorTwoCollumView" style="float: left; width: 50%; min-height: 50px; overflow: hidden;"><div class="EditableTextArea" style="padding:0px 25px;">This is text input. Clidddddddddddddddddddddddddck to edit this text...<a href="http://fb.com" style="color: rgb(27, 209, 121);">http://fb.com</a></div></div><div class="clear" style="clear:both"></div></div><div class="CustomControlHeader">  <div class="CustomControlLeftHeader">      <div class="sortBoxes" title="Move"></div>  </div> <div class="CustomControlRightHeader"><div class="xhEditoreEdtcheckDv" title="Edit"></div><div class="xhEditoreRemoveCtrlDv" title="Remove"></div></div><div class="clear"></div></div></div><div class="xhEditorControlForDesign" style="background-color: rgb(244, 244, 244); padding: 5px; position: relative; opacity: 1; left: 0px; top: 0px;" cntrl="Image"><div class="xhEditorImageCon xhEditorControl xhEditorOneCollumViewBd NotEditableTextArea"><div class="xhEditorOneCollumView customImgBlock" style="text-align: right; font-size: 0px;"><img src="http://shantest.appointy.com/EmailMarketing/TemplateHeaderImages/Anniversary/Anni1.jpg" style="width: 100%;"></div></div><div class="CustomControlHeader">  <div class="CustomControlLeftHeader">      <div class="sortBoxes" title="Move"></div>  </div> <div class="CustomControlRightHeader"><div class="xhEditoreEdtcheckDv" title="Edit"></div><div class="xhEditoreRemoveCtrlDv" title="Remove"></div></div><div class="clear"></div></div></div><div class="xhEditorControlForDesign" style="background-color: rgb(51, 42, 51); padding: 5px; position: relative; opacity: 1; left: 0px; top: 0px; color: rgb(189, 79, 110);" cntrl="Text"><div class="xhEditorTextCon xhEditorControl xhEditorOneCollumViewBd"><div class="xhEditorOneCollumView">This is text input. Click to edit this text...<a href="http://www.appointy.com" style="color: rgb(57, 240, 29);">http://www.appointy.com</a></div></div><div class="CustomControlHeader">  <div class="CustomControlLeftHeader">      <div class="sortBoxes" title="Move"></div>  </div> <div class="CustomControlRightHeader"><div class="xhEditoreEdtcheckDv" title="Edit"></div><div class="xhEditoreRemoveCtrlDv" title="Remove"></div></div><div class="clear"></div></div></div></div><div style="padding: 10px; background-color: rgb(230, 230, 230); color: rgb(133, 133, 133);" class="tempFooter xhEditorControlForDesign">        <div class="tempFooterCompany NotEditableTextArea">            <p style="text-align: left;"><font style="font-size:12px;"><span>*|_BUSINESS_NAME_|* </span></font></p>            <font style="font-size:12px;"><span>*|_BUSINESS_ADDRESS_|* </span></font>            <p id="copyright" style="text-align: left;"><font style="font-size:12px;">*|_COPYRIGHT_|* *|_BUSINESS_USERNAME_|* All rights reserved. </font></p>        </div>    <div class="CustomControlHeader">  <div class="CustomControlLeftHeader">  </div> <div class="CustomControlRightHeader"><div class="xhEditoreEdtcheckDv" title="Edit"></div></div><div class="clear"></div></div></div></div>';

  constructor(private _emailService: EmailTemplateService) {
  }

  onTemplateSave(event: any){
    console.log(event);
  }

  onTemplateWithEmail(event:  any){
    console.log(event['Html']);
    console.log(event['email'][0]);
    this.emailToBackEnd(event);

  }
  emailToBackEnd(emailinfo: any) {

    this._emailService.sendEmail(emailinfo).subscribe(
      result => console.log(result),
      error => {
        console.log(error);
        this.errorMessage = <any>error;
      }
    );
  }

  createCoupon(){
    this.createdCoupon  = {"id":46214,"type":"DISCOUNT","category":"BASIC","code":"mm123","title":"20 off at Spa","description":"","imageUrl":"","discountValue":20,"discountType":"PERCENTAGE","minimumOrderAmount":0,"appliesOnService":[],"appliesOnStaff":[],"appliesOnClient":{"id":0,"name":null},"startDateTime":"2017-07-11T00:00:00","endDateTime":"2017-07-11T00:00:00","expiresOn":"2050-01-01T00:00:00","byday":[],"appliesOnFirstBookingPerUser":false,"appliesOncePerUser":false,"usageLimit":0,"timesUsed":0,"isEnabled":true,"createdOn":"2017-07-11T14:16:00"};
  }


  LoadEmailTemplateLoad() {
      this.emailTemplateString = '';
  }

}
