import {Component, OnInit} from '@angular/core';
import {EmailTemplateService} from './emailTemplate.service'
@Component({
  moduleId: module.id,
  selector: 'my-app',
  templateUrl: 'app.component.html'
})

export class AppComponent implements OnInit {
  errorMessage: any;
  createdCoupon: any ={};
  DiscountCouponId: any = 46214;
  emailTemplateString : any  = "\n    <div id=\"email\" style=\"margin:0;color:#0a0a0a;font-family:Helvetica,Arial,sans-serif;font-size:16px;font-weight:400;line-height:1.3;margin:0;min-width:100%;padding:0;text-align:left;width:100%!important\">\n      <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" style=\"margin:0;background:#fff;border-collapse:collapse;border-spacing:0;color:#0a0a0a;font-family:Helvetica,Arial,sans-serif;font-size:16px;font-weight:400;height:100%;line-height:1.3;margin:0;padding:0;text-align:left;vertical-align:top;width:100%\">\n\n        <tbody><tr style=\"padding:0;text-align:left;vertical-align:top\">\n          <td style=\"margin:0;border-collapse:collapse!important;color:#0a0a0a;font-family:Helvetica,Arial,sans-serif;font-size:16px;font-weight:400;line-height:1.3;margin:0;padding:0;text-align:left;vertical-align:top;word-wrap:break-word\" valign=\"top\">\n\n            <table align=\"center\" cellpadding=\"0\" cellspacing=\"0\" style=\"margin:0 auto;background:#fefefe;background-color:#f0f4f5;border:3px solid #f1f4f5;border-collapse:collapse;border-spacing:0;float:none;margin:0 auto;padding:0;text-align:center;vertical-align:top;width:580px\" width=\"580px\">\n                    <tbody><tr style=\"padding:0;text-align:left;vertical-align:top\">\n                      <td style=\"margin:0;border-collapse:collapse!important;color:#0a0a0a;font-family:Helvetica,Arial,sans-serif;font-size:16px;font-weight:400;line-height:1.3;margin:0;padding:0;text-align:left;vertical-align:top;word-wrap:break-word\">\n                        <div id=\"destination\" style=\"border: 1px solid lightgray; border-radius: 15px\" class=\"            \">\n\n                          <div class=\"item indestination ex-moved\" data-module=\"discount_item\">\n          \n          <div class=\"item_element\" data-initial=\"false\" style=\"\">\n\n            <div class=\"hoverable\">\n              \n              <table cellpadding=\"0\" cellspacing=\"0\" data-coupon=\"true\" style=\"box-sizing: border-box; border-style: solid; border-color: rgb(255, 0, 0); border-width: 6px; width: 100%; table-layout: fixed; background-color: rgb(206, 62, 62); color: rgb(77, 113, 192);\">\n                <tbody><tr>\n                  <td style=\"text-align: center; width: 50%; padding: 10px 8px\">\n                    <img src=\"https://pbs.twimg.com/profile_images/604644048/sign051.gif\" width=\"50%\">\n                  </td>\n                  <td style=\"width: 50%; padding: 10px 8px\">\n                    <div style=\"padding: 5px 2px\">\n                      Werkt op Alle weekdagen van Juli 17, 2017 - Juli 24, 2017.\n                    </div>\n                    <div style=\"padding: 5px 2px; font-weight: bold;\">\n                      10% korting op Alle diensten bij \"cycle test\".\n                    </div>\n\n                    <div style=\"padding: 5px 2px\"><a class=\"anchorbtn\" href=\"#\" style=\" text-decoration: none; max-width: 100%; \"><button id=\"discountCouponBtn\" style=\"background-color: rgb(182, 144, 144); color: rgb(222, 29, 79); margin-bottom: 5px; margin-top: 5px; border-radius: 25px; max-width: 80%; word-wrap: break-word; padding: 10px 15px;\"> Get Discount Now </button></a></div>\n                  </td>\n                </tr>\n                <tr>\n                  <td style=\"padding: 5px 10%;\">\n\n                              <div style=\"padding-top: 10px; \">&nbsp;•&nbsp;&nbsp;  Rule 1</div>\n                              <div style=\"padding-top: 10px; \">&nbsp;•&nbsp;&nbsp;  Rule 2</div>\n                              <div style=\"padding-top: 10px; padding-bottom: 10px;\">&nbsp;•&nbsp;&nbsp;  Rule 3</div>\n\n                  </td>\n                </tr>\n              </tbody></table>\n\n            </div>\n\n\n          </div>\n        </div><div class=\"item ex-moved indestination\" data-module=\"image_image_item\">\n          \n          <div class=\"item_element textimagearea hoverable\" data-initial=\"false\" style=\"background-color: rgb(235, 33, 33);\">\n            <div style=\"width: 100%\">\n              <table cellpadding=\"0\" cellspacing=\"0\" style=\"width: 100%; table-layout: fixed; \">\n                <tbody><tr>\n                    <td class=\"itemimagearea\" data-align=\"center\" data-size=\"fit\" data-type=\"image\" style=\"width: 25%; text-align: center;\">\n                      <img data-from=\"left\" src=\"https://pbs.twimg.com/profile_images/604644048/sign051.gif\" style=\"width: 100%;\">\n                      \n                    </td>\n                    <td class=\"itemimagearea\" data-align=\"center\" data-size=\"fit\" data-type=\"image\" style=\"width: 75%; text-align: center;\">\n                      <img data-from=\"right\" src=\"https://pbs.twimg.com/profile_images/604644048/sign051.gif\" style=\"width: 100%;\">\n                      \n                    </td>\n                </tr>\n              </tbody></table>\n            </div>\n\n          </div>\n        </div><div class=\"item ex-moved indestination\" data-module=\"text_image_item\">\n          \n          <div class=\"item_element textimagearea hoverable\" data-initial=\"false\" style=\"background-color: rgba(161, 16, 16, 0.81);\">\n            <div style=\"width: 100%\">\n              <table cellpadding=\"0\" cellspacing=\"0\" style=\"width: 100%; table-layout: fixed; \">\n                <tbody><tr>\n                  <td class=\"textitem itemtextarea\" data-type=\"text\" style=\"width: 50%; padding: 15px; color: rgb(10, 10, 10); background-color: rgba(161, 16, 16, 0.81);\">Please type here... wdxhbwc wkceb wjlken xlqwkj kjebndkwjendxw iuedbnjkwe iuewn mwehdbwjeh</td>\n                  <td class=\"text-center itemimagearea\" data-align=\"center\" data-size=\"fit\" data-type=\"image\" style=\"width: 50%; text-align: center; max-width: 100%; \">\n                    <img data-from=\"one\" src=\"https://pbs.twimg.com/profile_images/604644048/sign051.gif\" style=\"width: 100%;\">\n                    \n                  </td>\n                </tr>\n              </tbody></table>\n            </div>\n\n          </div>\n        </div><div class=\"item indestination ex-moved\" data-module=\"image_text_item\">\n          \n          <div class=\"item_element hoverable\" data-initial=\"false\" style=\"background-color: rgba(131, 106, 233, 0.73);\">\n            <div style=\"width: 100%\">\n              <table cellpadding=\"0\" cellspacing=\"0\" style=\"width: 100%; table-layout: fixed; \">\n                <tbody><tr>\n                    <td class=\"itemimagearea \" data-align=\"center\" data-size=\"fit\" data-type=\"image\" style=\" width: 50%; text-align: center; max-width: 100%; \">\n                      <img data-from=\"one\" src=\"https://pbs.twimg.com/profile_images/604644048/sign051.gif\" style=\"width: 100%;\">\n                      \n                    </td>\n                    <td class=\"textitem itemtextarea\" data-type=\"text\" style=\"width: 50%; max-width: 50%; padding: 15px 10px; overflow: hidden; word-wrap: break-word; color: rgb(74, 202, 58); background-color: rgba(131, 106, 233, 0.73);\">Please type here... wnekwejc kwe eqlq ef hje nje fkej kecjbw qlejc hl rhb cwjen c jk mjnuygbuyb bjhbnbbvyv yvhbh uyyuhbh uhbh hvh&nbsp;</td>\n                </tr>\n              </tbody></table>\n            </div>\n\n          </div>\n        </div><div class=\"item indestination ex-moved\" data-module=\"image_item\">\n                            <div class=\"item_element\" data-initial=\"false\" style=\"background-color: rgba(226, 62, 62, 0.75);\">\n\n                              <div class=\"hoverable\" data-align=\"left\" data-size=\"actual\" style=\"text-align: left; max-width: 600px;\">\n                                <a class=\"anchorimg\" href=\"http://www.appointy.com\" style=\"text-decoration: none; \">\n                                  <img class=\"anchorimg\" data-from=\"one\" src=\"https://pbs.twimg.com/profile_images/604644048/sign051.gif\" style=\"width: 397px;\">\n                                  \n                                </a>\n                              </div>\n\n                            </div>\n                          </div><div class=\"item ex-moved indestination\" data-module=\"button_item\">\n          \n          <div class=\"item_element hoverable\" data-initial=\"false\" style=\"background-color: rgba(245, 53, 53, 0.69);\">\n\n            <div style=\"text-align: center\">\n                <table cellpadding=\"0\" cellspacing=\"0\" style=\"width: 100%; table-layout: fixed; \">\n                  <tbody><tr>\n                    <td>\n                      <a class=\"anchorbtn\" data-link=\"web\" href=\"http://www.appointy.com\" style=\" text-decoration: none; max-width: 100%; \"><button class=\"hoverable\" style=\"margin-bottom: 10px; margin-top: 10px; border-radius: 25px; max-width: 80%; word-wrap: break-word; background-color: rgb(230, 42, 227); padding: 10px 15px; color: rgb(50, 218, 211);\">Make your purchase</button></a>\n                    </td>\n                  </tr>\n                </tbody></table>\n            </div>\n\n          </div>\n        </div><div class=\"item indestination\" data-module=\"text_item\">\n                            <div class=\"item_element\" data-initial=\"false\" style=\"position: relative; background-color: rgba(233, 57, 57, 0.71);\">\n\n\n                              <div class=\"textitem hoverable\" data-type=\"text\" style=\"padding: 15px 10px; word-wrap: break-word; color: rgb(56, 37, 204); background-color: rgba(0, 0, 0, 0);\">Write a short preview of your email ehjfrv luebfvrh lierhbvc ilwhbcv ;e3rinj 3ebijc sx dss</div>\n\n                            </div>\n                          </div>\n                          \n                          <div class=\"item indestination\" data-module=\"text_item\">\n                            <div class=\"item_element\" data-initial=\"false\" style=\"position: relative;\">\n\n\n                              <div class=\"textitem hoverable\" data-type=\"text\" style=\"padding: 15px 10px; word-wrap: break-word;\">\n                                <p style=\"text-align: center;  margin: 0; padding: 0;\"><strong>Our mailing address is:</strong></p>\n                                <p style=\"text-align: center;  margin: 0; padding: 0;\">*|_BUSINESS_NAME_|*</p>\n                                <p style=\"text-align: center;  margin: 0; padding: 0;\">*|_BUSINESS_ADDRESS_|*</p>\n                                <p style=\"text-align: center;  margin: 0; padding: 0;\"><em>Copyright © *|CURRENT_YEAR|*  *|_BUSINESS_NAME_|*  , All rights reserved.</em></p>\n                              </div>\n\n                            </div>\n                          </div>\n\n\n                        </div>\n                      </td>\n                    </tr>\n\n                  </tbody></table>\n\n          </td>\n        </tr>\n\n      </tbody></table>\n\n\n    </div>\n    ";

  constructor(private _emailService: EmailTemplateService) {
  }

  ngOnInit() {
  }

DiscountArray :  Array<any> = [
  {"id":46214,"type":"DISCOUNT","category":"BASIC","code":"mm123","title":"20 off at Spa","description":"","imageUrl":"","discountValue":20,"discountType":"PERCENTAGE","minimumOrderAmount":0,"appliesOnService":[],"appliesOnStaff":[],"appliesOnClient":{"id":0,"name":null},"startDateTime":"2017-07-11T00:00:00","endDateTime":"2017-07-11T00:00:00","expiresOn":"2050-01-01T00:00:00","byday":[],"appliesOnFirstBookingPerUser":false,"appliesOncePerUser":false,"usageLimit":0,"timesUsed":0,"isEnabled":true,"createdOn":"2017-07-11T14:16:00"},
  {"id":46215,"type":"DISCOUNT","category":"BASIC","code":"rrtt101","title":"0 off at Spa","description":"","imageUrl":"","discountValue":20,"discountType":"PERCENTAGE","minimumOrderAmount":0,"appliesOnService":[],"appliesOnStaff":[],"appliesOnClient":{"id":0,"name":null},"startDateTime":"2017-07-11T00:00:00","endDateTime":"2017-07-11T00:00:00","expiresOn":"2050-01-01T00:00:00","byday":[],"appliesOnFirstBookingPerUser":false,"appliesOncePerUser":false,"usageLimit":0,"timesUsed":0,"isEnabled":true,"createdOn":"2017-07-11T14:16:00"},
  {"id":45410,"type":"DISCOUNT","category":"BASIC","code":"1cag558","title":"30 % Off on For Online Classes, (Google Video Chat), B-Complex ( B1, B2, B3, B5, B6, Biotin And Folic Acid ) at Skills Lagoon Pte. Ltd.","description":"","imageUrl":"http://rahul55.appointy.com/admin/Promote/Promote20/Images/Discounts.jpg","discountValue":30,"discountType":"PERCENTAGE","minimumOrderAmount":0,"appliesOnService":[{"id":128333,"name":"For Online Classes, (Google Video Chat)"},{"id":174196,"name":"B-Complex ( B1, B2, B3, B5, B6, Biotin And Folic Acid )"}],"appliesOnStaff":[],"appliesOnClient":{"id":0,"name":null},"startDateTime":"2017-02-18T00:00:00","endDateTime":"2017-02-18T23:59:00","expiresOn":"2050-01-01T00:00:00","byday":[],"appliesOnFirstBookingPerUser":false,"appliesOncePerUser":false,"usageLimit":0,"timesUsed":0,"isEnabled":true,"createdOn":"2017-02-18T09:33:00"}
  ]

  onTemplateSave(event: any){
    console.log(event);
  }

  onTemplateWithEmail(event :  any){
    console.log(event["Html"]);
    console.log(event["email"][0]);
    this.emailToBackEnd(event);

  }
  emailToBackEnd(emailinfo: any) {

    this._emailService.sendEmail(emailinfo).subscribe(
      result => console.log(result),
      error => {
        console.log(error);
        this.errorMessage = <any>error;
      }
    );
  }

  createCoupon(){
    this.createdCoupon  = {"id":46214,"type":"DISCOUNT","category":"BASIC","code":"mm123","title":"20 off at Spa","description":"","imageUrl":"","discountValue":20,"discountType":"PERCENTAGE","minimumOrderAmount":0,"appliesOnService":[],"appliesOnStaff":[],"appliesOnClient":{"id":0,"name":null},"startDateTime":"2017-07-11T00:00:00","endDateTime":"2017-07-11T00:00:00","expiresOn":"2050-01-01T00:00:00","byday":[],"appliesOnFirstBookingPerUser":false,"appliesOncePerUser":false,"usageLimit":0,"timesUsed":0,"isEnabled":true,"createdOn":"2017-07-11T14:16:00"};
  }


  LoadEmailTemplateLoad(){
      this.emailTemplateString = '';
  }

}
